<?php

/*
|--------------------------------------------------------------------------
| Web Routes
|--------------------------------------------------------------------------
|
| Here is where you can register web routes for your application. These
| routes are loaded by the RouteServiceProvider within a group which
| contains the "web" middleware group. Now create something great!
|
*/
Route::resource('/','IndexController',[
    'only'=>['index'],
    'names'=> [
        'index'=>'home'
    ]
]);

Route::resource ('portfolio', 'PortfolioController',[
    'parameters' => [
        'portfolio' => 'alias'
    ]
]);

Route::resource ('blogs', 'BlogController',[
    'parameters' => [
        'blogs' => 'alias'
    ]
]);
Route::get('blogs/cat/{cat_alias?}',['uses'=>'BlogController@index','as'=>'blogCat'])->where('cat_alias','[\w-]+');
Route::match(['get','post'],'/rezume',['uses'=>'RezumeController@index','as'=>'rezume']);
Route::match(['get','post'],'/uslugy',['uses'=>'UslugyController@index','as'=>'uslugy']);
Route::match(['get','post'],'/contact',['uses'=>'ContactController@index','as'=>'contact']);


Auth::routes();
//Список задач
Route::prefix('api')->group(function() {
    Route::resource('tasks', 'Admin\TaskController');
});

Route::get('logout','Auth\LoginController@logout');

Route::group(['prefix' => 'admin','middleware'=>'auth','middleware' => 'access:admin'], function(){
    //admin
    Route::get('/',['uses'=>'Admin\IndexController@index','as'=>'adminIndex']);

    Route::resource('/skills','Admin\SkillsController');
    Route::resource('/slider','Admin\SlidersController');
    Route::resource('/prems','Admin\PremsController');
    Route::resource('/logos','Admin\logosController');
    //VueJS Фильтры
    Route::prefix('api')->group(function() {Route::resource('filters', 'Admin\FilterController');});
    Route::get('/filters', function () {return view('main.admin.filters');});

    Route::resource('/footers','Admin\FooterController');
    Route::resource('/portfolios','Admin\PortfolioController');
    Route::resource('/techs','Admin\TechsController');
    Route::resource('/blog','Admin\BlogsController');

    //VueJS категории статей
    Route::prefix('api')->group(function() {Route::resource('cat', 'Admin\CatController');});
    Route::get('/cat', function () {return view('main.admin.cat');});
    //Menu
    Route::resource('/menus','Admin\MenusController');
    Route::resource('/contacts','Admin\ContactsController');
    Route::resource('/uslugs','Admin\UslugsController');
    Route::resource('/rezs','Admin\RezController');
});
