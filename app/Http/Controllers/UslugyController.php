<?php

namespace App\Http\Controllers;

use Illuminate\Http\Request;
use App\Repositories\UslugyRepository;
use App\Uslugy;

use App\Http\Requests;

class UslugyController extends SiteController
{
    public function __construct(UslugyRepository $usl_rep)
    {

        parent::__construct(new \App\Repositories\MenusRepository(new \App\Menu),
            new \App\Repositories\FooterRepository(new \App\Footer),
            new \App\Repositories\LogoRepository(new \App\Logo),
            new \App\Repositories\PortfolioRepository(new \App\Portfolio));

        $this->usl_rep = $usl_rep;
        $this->template = env('THEME') . '.uslugy';
    }

    public function index()
    {
        $this->title = ' Услуги';
        $this->keywords = 'Услуги Web разработчика';
        $this->meta_desc = 'Услуги Web разработчика';

        $uslugs = $this->getUslugs();
        $content = view(env('THEME') . '.uslugy_content')->with('uslugs', $uslugs)->render();
        $this->vars = array_add($this->vars, 'content', $content);

        return $this->renderOutput();
    }

    public function getUslugs() {
        $uslugs = $this->usl_rep->get();
        return $uslugs;
    }
}
