<?php

namespace App\Http\Controllers\Admin;

use Illuminate\Http\Request;
use App\Repositories\BlogsRepository;

use App\Http\Requests;
use App\Http\Controllers\Controller;

class IndexController extends AdminController
{
    public function __construct(BlogsRepository $b_rep) {
        parent::__construct();

        $this->b_rep = $b_rep;
        $this->template = env('THEME').'.admin.index';
    }

    public function index() {

        $this->title = 'Панель администратора';

        $blogs = $this->getBlogs();

        $this->content =view(env('THEME').'.admin.index_content')
            ->with(['blogs'=> $blogs])->render();

        return $this->renderOutput();

    }

    public function getBlogs() {
        $blogs = $this->b_rep->get();
        return $blogs;
    }

}
